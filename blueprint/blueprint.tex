\documentclass{report}

\usepackage{amsmath, amsthm}
\usepackage[showmore, dep_graph, coverage, project=../../]{blueprint}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\dochome{https://ianjauslin-rutgers.github.io/lean-complex-has_primitives/docs}

\title{Complex Analysis: Has Primitives}
\author{Rutgers Lean Seminar}

%
% This is a blueprint for the HasPrimitives project, written by the Rutgers Lean Group
% 
% This blueprint can be edited like a standard LaTeX document.
%
% There are 3 useful commands that are specific to lean:
%   * \lean{leanref}: is used in a definition, lemma or theorem, and is the
%		      name of the lean object corresponding to the definition,
%		      lemma or theorem.
%   * \leanok: is used in a lemma or theorem: marks that the lemma or theorem
%              has been fully formalized
%   * \uses{ref}: is used in a proof environment: specifies which definitions,
%                 lemma, theorems are used in the proof. Note that 'ref' is a
%                 LaTeX ref, not a lean one.
%

\begin{document}
\maketitle

This project aims to formalize a proof that holomorphic functions on simply connected open sets have primitives.

\chapter{The project}

\section{Main result}


We define the notion of a primitive as follows.

\begin{definition}
  \label{HasPrimitives}
  \lean{HasPrimitives}\leanok
  Given a set $U\subset\mathbb C$, for any differentiable $f:U\to\mathbb C$, there exists a differentiable $g:U\to\mathbb C$ such that $g'=f$ on $U$.
\end{definition}

The main result is

\begin{theorem}
  \label{hasPrimitives_of_simplyConnected}
  \lean{hasPrimitives_of_simplyConnected}\leanok
  \uses{HasPrimitives}
  Given an open, simply connected set $U\subset\mathbb C$, $U$ has primitives, in the sense of Definition \ref{HasPrimitives}.
\end{theorem}

\begin{proof}
  \uses{hasPrimitives_of_disc}
  sorry
\end{proof}

\section{Primitives on a Disc}
We first prove the main theorem on a disc.

\begin{theorem}
  \label{hasPrimitives_of_disc}
  \lean{hasPrimitives_of_disc}\leanok
  \uses{HasPrimitives}
  A disc has primitives, in the sense of Definition \ref{HasPrimitives}.
\end{theorem}

\begin{proof}
  \uses{WedgeInt,diff_of_wedges,deriv_of_wedgeInt}
  Consider a disc $U$ with center $z_0$.
  Given a function $f$ that is holomorphic on $U$, we construct its primitive by integrating $f$ over a ``wedge,'' that is, a horizontal line from $z_0$ to $ \Re(z)+ i \Im(z_0)$ plus a vertical line from there to $z$: for $z\in U$,
  \begin{equation}
    g(z)=\int_{z_0\to_W z}\ f(z)\ dz
  \end{equation}
  where $\int_{z_0\to_W z}$ is defined in Definition \ref{WedgeInt}.
  We are then left with proving that $g$ is differentiable and that $g'=f$.

  To do so, we compute
  \begin{equation}
    \frac{g(z+h)-g(z)}h
    =
    \frac{\int_{z_0\to z+h} f(x)\ dx-\int_{z_0\to z} f(x)\ dx}h
  \end{equation}
  which by Lemma \ref{diff_of_wedges}, is
  \begin{equation}
    \frac{g(z+h)-g(z)}h
    =
    \frac{\int_{z\to z+h} f(x)\ dx}h
    .
  \end{equation}
  We then conclude using Lemma \ref{deriv_of_wedgeInt}.
\end{proof}

The integral over the line segment from $z_1$ to $z_2$ is defined as follows.

\begin{definition}
  \label{linint}
  \lean{linint}\leanok
  Given $z_1,z_2\in\mathbb C$ and a function $f:\mathbb C\to\mathbb C$, the path from $z_1$ to $z_2$ is defined as
  \begin{equation}
    \gamma(t):=z_1(1-t)+z_2 t,
  \end{equation}
  and $\int_{z_1\to z_2}$ is defined as the integral of $f$ over $\gamma$.
\end{definition}

Then a wedge is the union of a horizontal line and a vertical line.

\begin{definition}
  \label{WedgeInt}
  \lean{WedgeInt}\leanok
  \uses{linint}
  Given $z_1,z_2\in\mathbb C$ and a function $f:\mathbb C\to\mathbb C$, the wedge integral from $z_1$ to $z_2$ is 
   $\int_{z_1\to_W\  z_2}$ is defined as the sum of two  complex integrals, one along the horizontal path from $z_1$ to $\Re(z_2)+i \Im(z_1)$, and another along a vertical path from there to $z_2$,
   \begin{equation}
      \int_{z_1\to_W\  z_2} f(x)\ dx
      :=
      \int_{z_1\to\Re(z_2)+i \Im(z_1)} f(x)\ dx
      +
      \int_{\Re(z_2)+i \Im(z_1)\to z_2} f(x)\ dx
      .
   \end{equation}
   If $\Re(z_2)+i \Im(z_1)$ is not in the domain of $f$, then the wedge is defined to be zero.
\end{definition}

In the proof of Theorem \ref{hasPrimitives_of_disc}, we use the following lemmas.

\begin{lemma}
  \label{diff_of_wedges}
  \lean{diff_of_wedges}\leanok
  \uses{WedgeInt}
  Given an open disc $U$ with center $z_0$, $z\in U$, and small enough $h\in \mathbb C$, and a function $f$ that is holomorphic on $U$
  \begin{equation}
    \int_{z_0\to_W (z+h)} f(x)\ dx
    -
    \int_{z_0\to_W z} f(x)\ dx
    =
    \int_{z\to_W (z+h)} f(x)\ dx
    .
  \end{equation}
\end{lemma}

\begin{proof}
  The proof is by adding and subtracting segments to make rectangles, and using that integrals over rectangles vanish.
\end{proof}

\begin{lemma}
  \label{deriv_of_wedgeInt}
  \lean{deriv_of_wedgeInt}
  \uses{WedgeInt}
  Given a continuous function $f:\mathbb C\to\mathbb C$ and $z_0\in\mathbb C$,
  \begin{equation}
    \int_{z_0\to_W z_0+h}f(x)\ dx = f(z_0)h + o(h)
    ,
  \end{equation}
  for $h$ in the filter (neighborhoods of $0$).
\end{lemma}

\begin{proof}
  \uses{wedgeInt_of_const}
  Since $f$ is continuous,
  \begin{equation}
    \int_{z_0\to_W z_0+h}f(x)\ dx
    =
    \int_{z_0\to_W z_0+h}(f(z_0)+o(1))\ dx
    =
    hf(z_0)+o(h)
    .
  \end{equation}
\end{proof}

\begin{lemma}
  \label{wedgeInt_of_const}
  \lean{wedgeInt_of_const}
  \uses{WedgeInt}
  The wedge integral of a constant is the difference.
\begin{equation}
  \int_{z_1\to_W z_2} c\ dx
  =
  c(z_2-z_1)
  .
\end{equation}
\end{lemma}

\end{document}
