\documentclass{report}

\usepackage{amsmath, amsthm}
\usepackage[showmore, dep_graph, coverage, project=../../]{blueprint}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\dochome{https://ianjauslin-rutgers.github.io/lean-complex-has_primitives/docs}

\title{Complex Analysis: Has Primitives}
\author{Rutgers Lean Seminar}

%
% This is a blueprint for the HasPrimitives project, written by the Rutgers Lean Group
% 
% This blueprint can be edited like a standard LaTeX document.
%
% There are 3 useful commands that are specific to lean:
%   * \lean{leanref}: is used in a definition, lemma or theorem, and is the
%		      name of the lean object corresponding to the definition,
%		      lemma or theorem.
%   * \leanok: is used in a lemma or theorem: marks that the lemma or theorem
%              has been fully formalized
%   * \uses{ref}: is used in a proof environment: specifies which definitions,
%                 lemma, theorems are used in the proof. Note that 'ref' is a
%                 LaTeX ref, not a lean one.
%

\begin{document}
\maketitle

This project aims to formalize a proof that holomorphic functions on simply connected open sets have primitives.

\chapter{The project}

\section{Main result}


We define the notion of a primitive as follows.

\begin{definition}
  \label{HasPrimitives}
  \lean{HasPrimitives}\leanok
  Given a set $U\subset\mathbb C$, for any differentiable $f:U\to\mathbb C$, there exists a differentiable $g:U\to\mathbb C$ such that $g'=f$ on $U$.
\end{definition}

The main result is

\begin{theorem}
  \label{hasPrimitives_of_simplyConnected}
  \lean{hasPrimitives_of_simplyConnected}\leanok
  \uses{HasPrimitives}
  Given an open, simply connected set $U\subset\mathbb C$, $U$ has primitives, in the sense of Definition \ref{HasPrimitives}.
\end{theorem}

\begin{proof}
  \uses{hasPrimitives_of_disc}
  sorry
\end{proof}

\section{Primitives on a Disc}
We first prove the main theorem on a disc.

\begin{theorem}
  \label{hasPrimitives_of_disc}
  \lean{hasPrimitives_of_disc}\leanok
  \uses{HasPrimitives}
  A disc has primitives, in the sense of Definition \ref{HasPrimitives}.
\end{theorem}

\begin{proof}
  \uses{WedgeInt,diff_of_wedges,deriv_of_wedgeInt}
  Consider an open disc $U$ with center $z_0$.
  Given a function $f$ that is holomorphic on $U$, we construct its primitive by integrating $f$ over a ``wedge,'', see Definition \ref{WedgeInt}:
  \begin{equation}
    g(z)=\int_{z_0\to_W z}\ f(z)\ dz
    .
  \end{equation}
  We are then left with proving that $g$ is differentiable and that $g'=f$.

  To do so, we compute
  \begin{equation}
    \frac{g(z+h)-g(z)}h
    =
    \frac{\int_{z_0\to_W z+h} f(x)\ dx-\int_{z_0\to_W z} f(x)\ dx}h
  \end{equation}
  which by Lemma \ref{diff_of_wedges}, is
  \begin{equation}
    \frac{g(z+h)-g(z)}h
    =
    \frac{\int_{z\to_W z+h} f(x)\ dx}h
    .
  \end{equation}
  We then conclude using Lemma \ref{deriv_of_wedgeInt}.
\end{proof}

A wedge is the union of a horizontal line and a vertical line.

\begin{definition}
  \label{WedgeInt}
  \lean{WedgeInt}\leanok
  \uses{linint}
  Given $z,w\in\mathbb C$ and a function $f:\mathbb C\to\mathbb C$, the wedge integral from $z$ to $w$ is defined as the sum of two complex integrals, one along the horizontal path from $z$ to $\Re(w)+i \Im(z)$, and another along a vertical path from there to $w$,
   \begin{equation}
      \int_{z\to_W\  w} f(x)\ dx
      :=
      \int_{\Re(z)}^{\Re(w)} f(x+i\Im(z))\ dx
      +
      i\int_{\Im(z)}^{\Im(w)} f(\Re(w)+iy)\ dy
      .
   \end{equation}
\end{definition}

In the proof of Theorem \ref{hasPrimitives_of_disc}, we use the following lemmas.

\begin{lemma}
  \label{diff_of_wedges}
  \lean{diff_of_wedges}\leanok
  \uses{WedgeInt}
  Given $c\in\mathbb C$, a radius $r>0$, we define $U$ be the disc centered at $c$ of radius $r$.
  For $z\in U$, small enough $h\in \mathbb C$, and a function $f$ that is holomorphic on $U$
  \begin{equation}
    \int_{c\to_W (z+h)} f(x)\ dx
    -
    \int_{c\to_W z} f(x)\ dx
    =
    \int_{z\to_W (z+h)} f(x)\ dx
    .
  \end{equation}
\end{lemma}

\begin{proof}
  Let $R$ be the rectangle whose diagonally opposed corners are at $a:=\Re(z)+i\Im(c)$ and $b:=\Re(z+h)+i\Im(z)$.
  We have
  \begin{equation}
    \int_R f(x)\ dx
    =
    \int_{a\to_W b} f(x)\ dx
    +
    \int_{\Re(z+h)}^{\Re(z)} f(x+i\Im(z))\ dx
    +
    i\int_{\Im(z)}^{\Im(c)} f(\Re(z)+iy)\ dy
    .
  \end{equation}
  Now, since
  \begin{equation}
    \int_{c\to_W (z+h)} f(x)\ dx
    =
    \int_{a\to_W b} f(x)\ dx
    +
    \int_{\Re(c)}^{\Re(z)} f(x+i\Im(c))\ dx
    +
    i\int_{\Im(z)}^{\Im(z+h)} f(\Re(z+h)+iy)\ dy
  \end{equation}
  we have
  \begin{equation}
    \int_{c\to_W (z+h)} f(x)\ dx
    =
    \int_R f(x)\ dx
    -
    \int_{\Re(z+h)}^{\Re(z)} f(x+i\Im(z))\ dx
    -
    i\int_{\Im(z)}^{\Im(c)} f(\Re(z)+iy)\ dy
    +
    \int_{\Re(c)}^{\Re(z)} f(x+i\Im(c))\ dx
    +
    i\int_{\Im(z)}^{\Im(z+h)} f(\Re(z+h)+iy)\ dy
    .
  \end{equation}
  Furthermore
  \begin{equation}
    \int_{c\to_W z)} f(x)\ dx
    =
    \int_{\Re(c)}^{\Re(z)} f(x+i\Im(c))\ dx
    +
    i\int_{\Im(c)}^{\Im(z)} f(\Re(z)+iy)\ dy
    .
  \end{equation}
  Therefore,
  \begin{equation}
    \int_{c\to_W (z+h)} f(x)\ dx
    -
    \int_{c\to_W z} f(x)\ dx
    =
    \int_R f(x)\ dx
    -
    \int_{\Re(z+h)}^{\Re(z)} f(x+i\Im(z))\ dx
    +
    i\int_{\Im(z)}^{\Im(z+h)} f(\Re(z+h)+iy)\ dy
  \end{equation}
  so
  \begin{equation}
    \int_{c\to_W (z+h)} f(x)\ dx
    -
    \int_{c\to_W z} f(x)\ dx
    =
    \int_R f(x)\ dx
    +\int_{z\to_W z+h} f(x)\ dx
    .
  \end{equation}
  Now,
  \begin{equation}
    |a-c|=|\Re(z-c)|\le |z-c|< r
  \end{equation}
  and, provided $|h|<r-|z-c|$,
  \begin{equation}
    |b-c|=|z-c+\Re(h)|\le |z-c|+|h|< r
  \end{equation}
  \begin{equation}
    |\Re(z+h)+i\Im(c)-c|=|\Re(z-c)+\Re(h)|< r
  \end{equation}
  Therefore, $R\subset U$.
  We conclude the proof using the Cauchy Integral theorem on $R$, and the fact that $f$ is holomorphic on $U$ and therefore on the interior of $R$.
\end{proof}

\begin{lemma}
  \label{deriv_of_wedgeInt}
  \lean{deriv_of_wedgeInt}\leanok
  \uses{WedgeInt}
  Given a continuous function $f:\mathbb C\to\mathbb C$ and $z_0\in\mathbb C$,
  \begin{equation}
    \int_{z_0\to_W z_0+h}f(x)\ dx = f(z_0)h + o(h)
    ,
  \end{equation}
  for $h$ in the filter (neighborhoods of $0$).
\end{lemma}

\begin{proof}
  \uses{wedgeInt_of_const}
  Since $f$ is continuous,
  \begin{equation}
    \int_{z_0\to_W z_0+h}f(x)\ dx
    =
    \int_{z_0\to_W z_0+h}(f(z_0)+o(1))\ dx
    =
    hf(z_0)+o(h)
    .
  \end{equation}
\end{proof}

\begin{lemma}
  \label{wedgeInt_of_const}
  \lean{wedgeInt_of_const}\leanok
  \uses{WedgeInt}
  For $z,w,c\in\mathbb C$,
  \begin{equation}
    \int_{z\to_W w} c\ dx
    =
    c(w-z)
    .
  \end{equation}
\end{lemma}

\begin{proof}\leanok
  By Definition \ref{WedgeInt},
  \begin{equation}
    \int_{z\to_W w} c\ dx
    =
    \int_{\Re(z)}^{\Re(w)} c\ dx
    +
    i\int_{\Im(z)}^{\Im(w)} c\ dy
    =c(w-z)
    .
  \end{equation}
\end{proof}

\end{document}
